<link rel="stylesheet" href="style.css">
<div class="card">
  <div class="progress"><div style="width:85%"></div></div>
  <h2>What does he call you? ðŸ’•</h2>
  <input id="nick">
  <button type="button" onclick="check()">Next</button>
</div>

<script>
function check(){
  const v = document.getElementById("nick").value.trim().toLowerCase();

  logEvent('input','nickname',v);
  saveAnswer('nickname',v);

  if (v === 'maa' || v === 'bujjama') {
    go('success.html');
  } else {
    go('lost.html');
  }
}
</script>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
(function(){
  emailjs.init("WUclbA0WR-m0LFLDo"); // from EmailJS dashboard
})();
</script>


<!-- GLOBAL -->
<script>
function go(p){ location.href=p; }

function logEvent(type,question,value){
  const logs=JSON.parse(localStorage.getItem("dev_logs"))||[];
  logs.push({time:new Date().toISOString(),type,question,value});
  localStorage.setItem("dev_logs",JSON.stringify(logs));
}

function saveAnswer(k,v){
  localStorage.setItem(k,v);
}

if(!window.hearts){
  window.hearts=true;
  setInterval(()=>{
    const h=document.createElement("div");
    h.className="heart";
    h.innerHTML="â¤ï¸";
    h.style.left=Math.random()*100+"vw";
    h.style.fontSize=(14+Math.random()*20)+"px";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),6000);
  },800);
}
</script>

<script>
function sendResponse(question, value, page){
  emailjs.send("service_phsism4", "template_d46qfz8", {
    time: new Date().toLocaleString(),
    question: question,
    value: value,
    page: page
  }).then(function(response){
    console.log("Email sent", response.status);
  }, function(error){
    console.error("Failed", error);
  });
}
</script>

<audio autoplay loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

